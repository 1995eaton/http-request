var httpRequest=function(a,d){var c,b,e;if('function'!==typeof d)throw Error('httpRequest error: callback function required');'string'===typeof a&&(a={url:a});if(!a.hasOwnProperty('url'))throw Error('httpRequest argument error: URL required');if(a.hasOwnProperty('jsonp')&&!0===a.jsonp)return c=document.createElement('script'),window.httpRequestCallback=function(a){d(a);delete window.httpRequestCallback},c.src=a.url+(-1!==a.url.indexOf('?')?'&':'?')+'callback=httpRequestCallback',document.head.appendChild(c);b=new XMLHttpRequest;b.open(void 0!==a.post?'POST':'GET',a.url);b.addEventListener('readystatechange',function(){4===b.readyState&&200===b.status&&d(!0===a.json?JSON.parse(b.responseText):b.responseText)});b.addEventListener('error',function(){throw Error('httpRequest Error: failed to retrieve the requested URL');});if(!1===a.post instanceof FormData&&'object'===typeof a.post&&!1===Array.isArray(a.post))for(e in c=new FormData,a.post)c.append(e,a.post[e]);return void 0!==a.post?b.send(c||a.post):b.send()};
